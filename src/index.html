<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Electron Media Selector</title>
  </head>
  <body>
    <h1>Select a Media File</h1>
    <button onclick="handleFile()">Select File</button>
    <button onclick="processFile()" id="processBtn" disabled>
      Process File
    </button>
    <div id="selectedFile" style="margin-top: 20px; word-wrap: break-word">
      No file selected
    </div>

    <script>
      let selectedFilePaths = null;

      async function handleFile() {
        try {
          const result = await window.electron.showOpenDialog();
          if (result.filePath) {
            selectedFilePaths = result;
            document.getElementById("processBtn").disabled = false;
            document.getElementById(
              "selectedFile"
            ).textContent = `Selected file: ${result.filePath}`;
          }
        } catch (error) {
          console.error("Error:", error);
          alert("Error selecting file: " + error.message);
        }
      }

      function processFile() {
        if (selectedFilePaths) {
          window.electron.ipcRenderer.send("process-file", selectedFilePaths);
        }
      }
    </script>
  </body>
</html>
